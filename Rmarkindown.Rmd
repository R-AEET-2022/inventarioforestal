

---
title: "Mi primer RMarkDown"
author: "Maria"
date: "2022-09-21"
output:
  html_document: default
  word_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

![Así hemos trabajado](images/Diegoenelmuseo.jpg){width="222"}

## Datos de partida

Hemos partido de los datos de un inventario en el que hemos trabajado. Son datos tomados en campo en parcelas de inventario. De cada árbol se coge el diámetro, y de algunos de ellos (árboles modelo), se coge también la altura.

Los datos tienen una estructura como esta:

```{r datos}
library(tidyverse)
datos <- read_csv2("datos/resultados_forcipula.csv")
plot(datos$d1, datos$h)
```

Lo primero que hacemos es seleccionar, de la tabla, los árboles modelo:

```{r arbolesmodelo}
arbolesmodelo <-  subset (datos, tipo == "Modelo 1" | tipo == "Modelo 2") %>%
   select (parcela, especie_nombre_ifn, Dm = d1, h)

arbolesdominantes <- subset (datos, tipo == "Dominante") %>%
  select (parcela, Ho = h)

arbolesmodelo_conHo <- arbolesmodelo %>%
  left_join (x = arbolesmodelo, y = arbolesdominantes, by = "parcela")
 
library(ggplot2)
ggplot(arbolesmodelo, aes(x = d1,     # con geom añade los puntos
                    y = h)) +
      geom_point(color = "orange")
```

## Generamos un modelo

Vamos a probar con un modelo blabla:

```{r modelolinea}
summary(iris)
```

y salen estos errores:

```{r modeloagresta, echo=TRUE}


Hs <- nls(H ~ 1.3+(a+b*Ho)*exp(d/d1),data = arbolesmodelo_conHo, start = list(a=5,b=0.95,d=-10.7))

```

El error blabla nos ha salido así:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
